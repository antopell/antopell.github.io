<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="../img/icon.png" type="image/icon type">
    <title>Anto's Projects</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="../styles.css">
</head>

<body style="background-color: #bcd1c7;">
    <!-- bootstrap js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <!-- foto principal -->
    <div style="width: 100%; height: 25vh;">
        <img src="../img/banner.jpeg" style="object-fit: cover; height: 100%; width: 100%;">
    </div>

    <!-- separador -->
    <hr class="my-4">

    <div class="container">
        <div class="row text-start d-flex justify-content-between">
            <div class="col-12 col-sm-6">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="proyectos.html">Proyectos</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Worms Remake</li>
                    </ol>
                </nav>
            </div>

            <!-- cambio de idioma -->
            <div class="col-12 col-sm-5 text-center d-flex justify-content-end">
                <div class="row">
                    <div class="col-3">
                        <img src="../img/languageIcon.svg" height="30vh">
                    </div>
                    <div class="col-2 dropdown">
                        <button class="btn btn-success btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false" style="background-color: #57a199;"
                            onmouseover="this.style.backgroundColor='#4b8a7f'"
                            onmouseout="this.style.backgroundColor='#57a199'">
                            Español
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../en/wormsRemake.html">English</a></li>
                            <li><a class="dropdown-item active" href="wormsRemake.html">Español</a></li>
                        </ul>
                    </div>

                </div>

            </div>
        </div>
    </div>
    <!-- titulo -->
    <div>
        <h1 class="col-12 text-center">Worms remake</h1>
    </div>

    <div class="container text-start mt-3">
        <h2>Descripción</h2>
        <!-- TODO fijarse si el texto queda mejor con font-monospace en class -->
        <p>Este proyecto lo realizamos en 7 semanas para la materia "Taller de Programación". El objetivo era recrear
            el juego clásico "Worms" el cual es un juego multijugador con interfaz gráfica. Al ser un proyecto tan grande 
            y con una duración corta, se nos recomendó dividir el proyecto en 3 partes para que cada integrante del grupo pueda 
            concentrarse en una sección en específico y lograr implementarlo por completo. <br>
            Fue un proyecto super interesante en el cual aprendimos a utilizar muchas herramientas y también mejoramos nuestro
            conocimiento de otras, además de obtener experiencia trabajando en proyectos grandes sin instrucciones sobre cómo implementarlo.
        </p>
        <h2>Lo que hice</h2>
        <p>El proyecto al inicio se dividió en parte gráfica/ cliente, server/ juego y protocolo y concurrencia, siendo esta
            última la sección que decidí implementar. <br>
            El protocolo tenía 2 dificultades. La primera era que debía tener un formato claro que no solo me simplifique el uso, sino que
            también debía contemplar que si en un futuro alguna persona quisiera continuar con el proyecto debería ser capaz de 
            entender el protocolo sin necesitar de mi presencia. Por esta razón, la modularización y creación de métodos que
            agilicen el envío y obtención de mensajes era crucial. La otra dificultad era testearlo antes de unirlo a las otras
            secciones del proyecto, ya que al utilizar sockets el testeo no es sencillo y el no testearlo implicaba un problema
            para mis compañeros, ya que no podían saber si el error era suyo o del protocolo. Por suerte esas dificultades 
            pudieron superarse y todas las semanas podía agregar los métodos que el resto del equipo necesitaba.<br> 
            Luego para concurrencia me centré en asegurarme que el server no pierda memoria, es decir, unir todos los hilos en el momento 
            correcto y liberar memoria que se haya pedido. <br>
            Ambas tareas (protocolo y concurrencia) eran chicas en comparación con el trabajo de mis compañeros, por lo que empecé
            a ayudar en otras áreas/ tareas y para cuando terminé el proyecto había implementado el menú inicial (creado con QT) 
            para crear/ unirse a partidas, la configuración con yaml de armas y cliente, daño por caída (y generalización de recibir
            daño, más el impulso que recibe el gusano herido), parábola de los proyectiles (con su variación en base a la potencia 
            y además cómo se enviaba el ángulo para graficarlos correctamente), implementación de fragmentos y cambio de características de
            los proyectiles en base al tipo de arma.
        </p>
        <h2>Cómo funciona</h2>
        <p>Primero se debe iniciar el server, luego cada cliente va a poder unirse al server e iniciar el menú principal. Después de que 
            el cliente (ahora jugador) se haya unido o creado una partida se pasa a la pantalla principal donde se renderiza todo
            el juego. En este momento se mostrará una pantalla diciendo el id de partida para que otros clientes sepan a que partida
            unirse y se esperará a que se llegue a la cantidad mínima de jugadores para poder iniciar la partida. Una vez que está
            la cantidad mínima de jugadores, al anfitrión se le dará la posibilidad de iniciar la partida apretando la tecla "C".<br> 
            Una vez iniciada la partida, se asignan los gusanos disponibles en el mapa aleatoriamente de forma pareja. En caso de 
            que algún/ algunos jugadores tengan menos gusanos que otros se les da un boost de vida para compensar por la falta
            de gusanos. Luego, el juego se ejecuta por turnos, en el cual el jugador de turno tiene un gusano (este cambia 
            cada vez que le toca al jugador a menos de que le quede un solo gusano). Durante el turno puede moverse por el mapa,
            equiparse armas, recoger cajas de provisiones (que caen aleatoriamente cada cierta cantidad de tiempo) y utilizar un arma. <br>
            Cada arma tiene características diferentes, algunas tienen potencia y/o ángulo variable, a otras se les dice dónde es el 
            objetivo clickeando el lugar a atacar/ teletransportarse. Una vez que el gusano ataca, se le dan 3 segundos para moverse
            y luego se cambia de turno. Si el gusano de turno recibe daño (se cae) o se le termina el tiempo, se pasa de turno.
            Un detalle importante es que entre turnos se espera a que todos los proyectiles exploten y todos los gusanos estén quietos
            o muertos/ ahogados ya que se quiere que todos los jugadores tengan un panorama claro de cómo está la partida antes del siguiente turno. <br>
            En caso de que un jugador no tenga más gusanos podrá seguir viendo la partida y cuando solo queden gusanos de 1 jugador la partida se
            termina y se le muestra una pantalla de victoria o derrota a cada jugador. Luego de un
            par de segundos se cierra la partida y se termina el juego.<br>
            Durante la partida se pueden usar "cheats", los cuales implementamos pensando en el testeo del juego y en la diversión
            de los jugadores.
        </p>
        <!-- me salteo el 3 para que se note la diferencia -->
        <h4>Tecnologías usadas</h4>
        <p>El proyecto se realizó en C++ usando librerías para graficar, aplicar la física y testear. <br>
            Para el testeo se uso catch2 por recomendación de los docentes de la materia. Para la parte gráfica se utilizó
            QT para el menú inicial y SDL para el game loop. Luego, para el manejo de físicas se usó box2d. Además es un 
            proyecto que es multi-thread por la naturaleza de un servidor para un juego donde se espera poder tener más de
            una partida al mismo tiempo y la comunicación entre server y cliente se realiza a través de sockets.
            Como es un programa que tiene recursos compartidos entre threads, creamos monitores para asegurar que no existan
            race conditions (con uso de un mutex). 
        </p>
        <h2>Preview</h2>
        <p>Una partida común se vería de la siguiente forma. </p>
        <div class="row d-flex justify-content-start">
            <div class="col-12 col-sm-6 mx-auto h-100 mb-4">
                <p>1. Se inicia el menú. </p>
                <img class="mt-auto" src="../img/wormsRemake/mainMenu.png" width="100%">
            </div>
            <div class="col-12 col-sm-6 mx-auto h-100 mb-4">
                <p>2. Se elije un mapa entre los posibles.</p>
                <img class="mt-auto" src="../img/wormsRemake/mapMenu.png" width="100%">
            </div>
        </div>
        <div class="row d-flex justify-content-start">
            <div class="col-12 col-sm-6 mx-auto h-100 mb-4">
                <p>3. Se espera a los demás jugadores.</p>
                <img class="mt-auto" src="../img/wormsRemake/waiting.png" width="100%">
            </div>
            <div class="col-12 col-sm-6 mx-auto h-100 mb-4">
                <p>4. Se puede iniciar la partida.</p>
                <img class="mt-auto" src="../img/wormsRemake/starting.png" width="100%">
            </div>
        </div>
        <div class="row d-flex justify-content-start">
            <div class="col-12 col-sm-6 mx-auto h-100 mb-4">
                <p>5. Se juega la partida.</p>
                <img class="mt-auto" src="../img/wormsRemake/game.png" width="100%">
            </div>
            <div class="col-12 col-sm-6 mx-auto h-100 mb-4">
                <p>6. Se termina y te avisa que ganaste!</p>
                <img class="mt-auto" src="../img/wormsRemake/win.png" width="100%">
            </div>
        </div>
        <h2>Links</h2>
        <p>El proyecto se encuentra con el manual de usuario para saber los controles y cosas 
            que se pueden hacer y un instalador para facilitar el uso del juego en el siguiente repositorio: 
            <a href="https://github.com/Los-Socketes/Worms">Ir al código.</a>
        </p>
    </div>


    <!-- separador -->
    <hr class="my-4">

    <!-- fin pagina con redes -->
    <div class="text-center contact-section">
        <h5>Contacto:</h5>
        <a href="https://github.com/antopell" class="btn">
            <img src="../img/githubIcon.png" alt="GitHub">
        </a>
        <a href="https://linkedin.com/in/antonella-pellegrini-9a0631204" class="btn">
            <img src="../img/linkedinIcon.png" alt="LinkedIn">
        </a>
        <a href="mailto:antopell29@gmail.com" class="btn">
            <img src="../img/mailIcon.svg" alt="Mail">
        </a>
    </div>

</body>

</html>